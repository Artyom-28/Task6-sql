
CREATE DATABASE StudentsDB
COLLATE Cyrillic_General_CI_AS
GO

CREATE TABLE COURSES 
(
	 COURSE_ID int NOT NULL IDENTITY(1,1) 
	,[NAME] nvarchar(45) NOT NULL
	,[DESCRIPTION] nvarchar(max) NULL
)
GO


CREATE TABLE GROUPS 
(
	 GROUP_ID int NOT NULL IDENTITY(1,1)
	,COURSE_ID int not NULL
	,[NAME] nvarchar(20)
)
GO



CREATE TABLE STUDENTS 
(
   STUDENT_ID int IDENTITY(1,1)
  ,GROUP_ID int NOT NULL
  ,FIRST_NAME nvarchar(20)
  ,LAST_NAME nvarchar(20)
)
GO


ALTER TABLE COURSES
ADD PRIMARY KEY(COURSE_ID)
GO


ALTER TABLE GROUPS
ADD PRIMARY KEY(GROUP_ID)
GO


ALTER TABLE STUDENTS
ADD PRIMARY KEY(STUDENT_ID)
GO


ALTER TABLE [GROUPS] ALTER COLUMN COURSE_ID int null 
GO


ALTER TABLE GROUPS
ADD FOREIGN KEY(COURSE_ID) REFERENCES COURSES (COURSE_ID)
ON DELETE SET NULL
GO


ALTER TABLE [STUDENTS] ALTER COLUMN GROUP_ID int null 
GO

ALTER TABLE STUDENTS
ADD FOREIGN KEY(GROUP_ID) REFERENCES GROUPS (GROUP_ID)
ON DELETE SET NULL
GO
